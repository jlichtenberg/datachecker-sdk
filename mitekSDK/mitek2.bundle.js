(this.webpackJsonpmitekScienceSDK=this.webpackJsonpmitekScienceSDK||[]).push([[3],{112:function(a,b,c){"use strict";function d(a){var b=Math.sqrt,c={},d={},e={},f={};c.x=a.ax,c.y=a.ay,d.x=a.bx,d.y=a.by,e.x=a.cx,e.y=a.cy,f.x=a.dx,f.y=a.dy;var g=b(m(c.y-d.y)*m(c.y-d.y)+m(c.x-d.x)*m(c.x-d.x)),h=b(m(d.y-e.y)*m(d.y-e.y)+m(d.x-e.x)*m(d.x-e.x)),i=b(m(e.y-f.y)*m(e.y-f.y)+m(e.x-f.x)*m(e.x-f.x)),j=b(m(f.y-c.y)*m(f.y-c.y)+m(f.x-c.x)*m(f.x-c.x)),k=[g,h,i,j];k.sort(function(c,a){return a-c});var l=k[0],n=k[2],o=k[3];return{actualAspectRatio1:l/n,actualAspectRatio2:l/o}}function e(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",b=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1],c={GLOBAL:{minimumImageSize:450,maximumDefaultImageSize:1920,maximumDefaultDocumentImageSize:4096},DL_BACK:{fourCornerThreshold:750},DL_FRONT:{fourCornerThreshold:!0===b||Object(r.e)()?750:650,lowContrastThreshold:500,busyBackgroundThreshold:600,glareThreshold:590,focusThreshold:!0===b||Object(r.e)()?800:500,exposureThreshold:400,horizontalFillThreshold:550,minPaddingThreshold:25,skewAngleThreshold:99},PASSPORT:{fourCornerThreshold:!0===b||Object(r.e)()?300:250,lowContrastThreshold:500,busyBackgroundThreshold:600,glareThreshold:500,focusThreshold:!0===b||Object(r.e)()?690:500,exposureThreshold:400,mrzThreshold:850,horizontalFillThreshold:500,minPaddingThreshold:25,skewAngleThreshold:225},CHECK_FRONT:{fourCornerThreshold:!0===b||Object(r.e)()?600:500,lowContrastThreshold:0,busyBackgroundThreshold:0,glareThreshold:0,focusThreshold:!0===b||Object(r.e)()?600:400,exposureThreshold:330,horizontalFillThreshold:675,minPaddingThreshold:25,skewAngleThreshold:99},CHECK_BACK:{fourCornerThreshold:!0===b||Object(r.e)()?600:500,lowContrastThreshold:0,busyBackgroundThreshold:0,glareThreshold:0,focusThreshold:!0===b||Object(r.e)()?50:50,exposureThreshold:330,horizontalFillThreshold:675,minPaddingThreshold:25,skewAngleThreshold:99},DOCUMENT:{fourCornerThreshold:!0===b||Object(r.e)()?500:500,lowContrastThreshold:500,busyBackgroundThreshold:600,glareThreshold:0,focusThreshold:!0==b||Object(r.e)()?750:750,exposureThreshold:320,horizontalFillThreshold:510,minPaddingThreshold:20,skewAngleThreshold:99}};return Object(r.d)(c[a])?c[a]:"all"===a?c:""}function f(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:e("GLOBAL"),c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0;return a.fourCornerScore<b.fourCornerThreshold?(0<d&&console.warn("IQA Failure: MITEK_ERROR_FOUR_CORNER ("+a.fourCornerScore+" < "+b.fourCornerThreshold+")"),{status:"failure",code:"NF",key:"MITEK_ERROR_FOUR_CORNER",score:a.fourCornerScore}):"undefined"!=typeof a.skewAngle&&a.skewAngle>b.skewAngleThreshold?{status:"failure",code:"QS",key:"MITEK_ERROR_SKEW_ANGLE",score:a.skewAngle}:"undefined"!=typeof a.horizontalFill&&a.horizontalFill<b.horizontalFillThreshold?{status:"failure",code:"HF",key:"MITEK_ERROR_HORIZONTAL_FILL",score:a.horizontalFill}:"undefined"!=typeof a.minPadding&&a.minPadding<b.minPaddingThreshold?{status:"failure",code:"MP",key:"MITEK_ERROR_MIN_PADDING",score:a.minPadding}:"undefined"!=typeof a.lowContrastConfidence&&a.lowContrastConfidence<b.lowContrastThreshold?{status:"failure",code:"LC",key:"MITEK_ERROR_LOW_CONTRAST",score:a.lowContrastConfidence}:"undefined"!=typeof a.busyBackground&&a.busyBackground<b.busyBackgroundThreshold?{status:"failure",code:"BB",key:"MITEK_ERROR_BUSY_BACKGROUND",score:a.busyBackground}:a.exposureScore<b.exposureThreshold?(0<d&&console.warn("IQA Failure: MITEK_ERROR_TOO_DARK ("+a.exposureScore+" < "+b.exposureThreshold+")"),{status:"failure",code:"BF",key:"MITEK_ERROR_TOO_DARK",score:a.exposureScore}):a.focusScore<b.focusThreshold?(0<d&&console.warn("IQA Failure: MITEK_ERROR_FOCUS ("+a.focusScore+" < "+b.focusThreshold+")"),{status:"failure",code:"SF",key:"MITEK_ERROR_FOCUS",score:a.focusScore}):a.glareScore<b.glareThreshold?(0<d&&console.warn("IQA Failure: MITEK_ERROR_GLARE ("+a.glareScore+" < "+b.glareThreshold+")"),{status:"failure",code:"GF",key:"MITEK_ERROR_GLARE",score:a.glareScore}):{status:"success"}}function g(a){1<arguments.length&&arguments[1]!==void 0?arguments[1]:e("GLOBAL");return 500<=a.fourCornerScore?{status:"success"}:{status:"failure",code:"NB",key:"CV_NO_BARCODE_FOUND",score:a.fourCornerScore}}function h(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:e("GLOBAL"),c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0;if("undefined"!=typeof a.mrzScore&&a.mrzScore<b.mrzThreshold)return 0<d&&console.warn("IQA Failure: MITEK_ERROR_MRZ_MISSING ("+a.mrzScore+" < "+b.mrzThreshold+")"),{status:"failure",code:"MZ",key:"MITEK_ERROR_MRZ_MISSING",score:a.mrzScore}}function i(a,b,c){var e=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0;if("undefined"!=typeof a.ax&&0<a.ax){var f=d(a),g=m(b-f.actualAspectRatio1).toFixed(2),h=m(b-f.actualAspectRatio2).toFixed(2),i=Math.max(g,h);if(i>c)return 0<e&&console.warn("Aspect Ratio failed - aspectRatioVariance: "+i+" > aspectRatioThreshold: "+c),{status:"failure",code:"NF",key:"MITEK_ERROR_FOUR_CORNER",aspectRatioVariance:i,score:0}}return{status:"success",aspectRatioVariance:0}}function j(a){var b={imageData:a.imageData,fourCornerA:{x:a.ax,y:a.ay},fourCornerB:{x:a.bx,y:a.by},fourCornerC:{x:a.cx,y:a.cy},fourCornerD:{x:a.dx,y:a.dy}};return 0<a.glareTop&&0<a.glareBottom&&0<a.glareLeft&&0<a.glareRight&&(b.glareTop=a.glareTop,b.glareBottom=a.glareBottom,b.glareLeft=a.glareLeft,b.glareRight=a.glareRight),b}function k(a){return Object(r.d)(a)&&Object(r.f)(a)&&I(a)}function l(a){var b=null;return C="undefined"==typeof a.thresholds?null:a.thresholds,D="undefined"==typeof a.debugLevel?0:a.debugLevel,E=!1,F="undefined"==typeof a.guidePaddingLevel?1:a.guidePaddingLevel,s=o()({},a,{ranOnce:!0}),Object(r.d)(C)&&(!k(C.fourCorner)&&console.warn("thresholds.fourCorner must have a valid numeric value between 0 and 1000"),!k(C.glare)&&console.warn("thresholds.glare must have a valid numeric value between 0 and 1000"),!k(C.focus)&&console.warn("thresholds.focus must have a valid numeric value between 0 and 1000"),!k(C.exposure)&&console.warn("thresholds.exposure must have a valid numeric value between 0 and 1000"),!k(C.mrz)&&console.warn("thresholds.mrz must have a valid numeric value between 0 and 1000")),new Promise(function(a){y=0,z=0,B={},b=setInterval(function(){!0===w&&(clearInterval(b),a({msg:"ready"}))},50)})}var m=Math.abs;c.r(b),c.d(b,"processFrame",function(){return G}),c.d(b,"default",function(){return l});var n=c(6),o=c.n(n),p=c(191),q=c.n(p),r=c(2);var s={ranOnce:!1},t=!0,u=new q.a,v={documentType:10,imageData:null,detectFourCorners:!0,detectGlare:!0,detectFocus:!0,detectExposure:!0,enableLogging:!1},w=!1,x=null,y=0,z=0,A={},B={},C=null,D=0,E=!1,F=1,G=function(a){s=o()({},s,a,{imageData:null});var b=e(a.documentType);("CHECK_FRONT"==a.documentType||"CHECK_BACK"==a.documentType)&&(1===F?b.horizontalFillThreshold=675:2===F?b.horizontalFillThreshold=650:3===F?b.horizontalFillThreshold=600:void 0);var c=a.top?{guideWindowT:a.top||120,guideWindowL:a.left||320,guideWindowB:a.top+a.gh||450,guideWindowR:a.left+a.gw||975}:{},d={DL_FRONT:10,DL_BACK:20,PDF417_BARCODE:20,CHECK_FRONT:50,CHECK_BACK:60,PASSPORT:70,DOCUMENT:100};x=d[a.documentType],v.detectMRZ=!("PASSPORT"!==a.documentType);var f=o()({},c,v,b,{documentType:d[a.documentType]||null,imageData:a.imageData});0<D&&(f.enableLogging=!0),A={_x:f.guideWindowL,_y:f.guideWindowT,width:f.guideWindowR-f.guideWindowL,height:f.guideWindowB-f.guideWindowT},("CHECK_FRONT"===a.documentType||"CHECK_BACK"===a.documentType)&&(f.detectGlare=!1),u.onerror=function(){var b={warnings:{status:"failure",code:"NF",key:"MITEK_ERROR_FOUR_CORNER",score:0},imageData:a.imageData};s.resultCallback(b)};var g=setTimeout(function(){t&&(t=!1,clearTimeout(g),u.postMessage(f))},100)},H=setInterval(function(){t=!0},90),I=Object(r.b)(0,1e3),J=function(){var a=Math.min,b=a(document.documentElement.clientWidth,window.innerWidth||0),c=a(document.documentElement.clientHeight,window.innerHeight||0);return c>b?"portrait":"landscape"},K=function(a){var b=a.data;if(!0===w&&b.hasOwnProperty("imageData")){if("function"==typeof putOnIbCanvas){var c={top:b.glareTop,bottom:b.glareBottom,left:b.glareLeft,right:b.glareRight},d={ax:b.ax,ay:b.ay,bx:b.bx,by:b.by,cx:b.cx,cy:b.cy,dx:b.dx,dy:b.dy};putOnIbCanvas(b.imageData,c,d)}var l=o()({},b,{imageData:null,documentType:s.documentType}),m=0,n=e(s.documentType);if("DOCUMENT"===s.documentType&&(n.horizontalFillThreshold="portrait"===J()?565:510),"MANUAL_CAPTURE"===s.mode&&(n.focusThreshold=500),!E&&0<D){var p={fourCorner:n.fourCornerThreshold,glare:n.glareThreshold,focus:n.focusThreshold,exposure:n.exposureThreshold};"PASSPORT"===s.documentType&&(p.mrz=n.mrzThreshold);var q=r.e?"mobile":"desktop";console.log("Default thresholds for documentType: "+s.documentType+" | deviceType: "+q,p)}if(Object(r.d)(C)){if(k(C.fourCorner)&&(!E&&0<D&&console.log("Overriding default threshold fourCorner: "+n.fourCornerThreshold+" with: "+C.fourCorner),n.fourCornerThreshold=C.fourCorner),k(C.glare)&&"CHECK_FRONT"!==s.documentType&&"CHECK_BACK"!==s.documentType&&(!E&&0<D&&console.log("Overriding default threshold glare: "+n.glareThreshold+" with: "+C.glare),n.glareThreshold=C.glare),k(C.focus)&&(!E&&0<D&&console.log("Overriding default threshold focus: "+n.focusThreshold+" with: "+C.focus),n.focusThreshold=C.focus),k(C.exposure)&&(!E&&0<D&&console.log("Overriding default threshold exposure: "+n.exposureThreshold+" with: "+C.exposure),n.exposureThreshold=C.exposure),k(C.mrz)&&"PASSPORT"===s.documentType&&(!E&&0<D&&console.log("Overriding default threshold mrz: "+n.mrzThreshold+" with: "+C.mrz),n.mrzThreshold=C.mrz),k(C.horizontalFillThreshold)&&("CHECK_FRONT"===s.documentType||"CHECK_BACK"===s.documentType)&&(!E&&0<D&&console.log("Overriding default threshold horizontalFillThreshold: "+n.horizontalFillThreshold+" with: "+C.horizontalFillThreshold),n.horizontalFillThreshold=C.horizontalFillThreshold),!E&&0<D){var t={fourCorner:n.fourCornerThreshold,glare:n.glareThreshold,focus:n.focusThreshold,exposure:n.exposureThreshold};"PASSPORT"===s.documentType&&(t.mrz=n.mrzThreshold),console.log("Updated thresholds: ",t)}E=!0}var u=b.fourCornerScore,v=b.glareScore,x=b.exposureScore,y=b.focusScore,z=b.horizontalFill,A=b.mrzScore,B=b.lowContrastConfidence,F=b.busyBackground,G=b.minPadding,H=b.skewAngle;if(0<D){var I="IQA values: fourCornerScore="+u+" | glareScore="+v+" | exposureScore="+x+" | focusScore="+y+" | horizontalFill="+z;"PASSPORT"===s.documentType&&(I+=" | mrzScore="+A),console.log(I)}var K={};if(K="DL_BACK"===s.documentType?g(l,n):f(l,n,s.mode||null,D),"DL_FRONT"===s.documentType){var L=i(l,1.53,.2,D);"failure"===L.status&&(K=L,m=L.aspectRatioVariance)}if("PASSPORT"===s.documentType&&"success"===K.status){var M=h(l,n,s.mode||null,D);K=o()({},K,M)}var N=j(l);!0===s.captureNextFrame&&(K.status="success");var O={aspectRatioVariance:m},P=o()({fourCornerScore:u,glareScore:v,exposureScore:x,focusScore:y,horizontalFill:z,lowContrastConfidence:B,busyBackground:F,skewAngle:H,minPadding:G},"DL_FRONT"===s.documentType&&O,{mrzScore:A}),Q=o()({warnings:K},N,0<D&&P,{imageData:"success"===K.status||"AUTO_CAPTURE"!==s.mode||s.captureNextFrame?b.imageData:null});s.resultCallback(Q)}"{\"mitekWorkerStatus\": \"ready\"}"==b&&(w=!0)};u.onmessage=K},191:function(a,b,c){a.exports=function(){return new Worker(c.p+"1ac77890d64eec0d6f72.worker.js")}}}]);